<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The BioGreen — Home</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <nav class="nav">
      <div class="brand">
        <img src="images/logo.jpg" alt="BioGreen logo" />
        <span class="brand-name">The BioGreen</span>
      </div>
      <button class="menu-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="main-menu">☰</button>
      <div class="menu" id="main-menu">
        <a class="active" href="index.html">Home</a>
        <div class="dropdown">
          <a class="dropdown-toggle">Projects</a>
          <div class="dropdown-menu">
            <a href="projects/brewery-waste.html">Grains to Greens</a>
            <a href="projects/plastic-reduction.html">Plastic Reduction</a>
          </div>
        </div>
        <a href="news.html">News</a>
        <a href="community.html">Community</a>
        <a href="partners.html">Global Partners</a>
        <a href="team.html">Team</a>
        <a href="contact.html">Contact</a>
      </div>
    </nav>
  </header>

  <section class="hero" style="--hero-img: url('images/hero_home.jpg')">
    <div class="container">
      <span class="kicker">Welcome</span>
      <h1>Together for a Greener Tomorrow</h1>
      <p class="lead">Sustainability, innovation, and collaboration to redefine green growth.</p>
      <div class="actions">
        <a class="btn" href="https://docs.google.com/forms/d/e/1FAIpQLSfyrYPMFbpblwrjf735tpshw0kfAPxARhTBlcg-CUtjKqo_Og/viewform" target="_blank">Join the Movement</a>
        <a class="btn" href="team.html">Meet the Team</a>
      </div>
    </div>
  </section>

  <main class="container">
    <section class="section" id="story">
      <h2>Our Story</h2>
      <p>We believe that science and community can work together to make sustainable change. BioGreen started as a student-led initiative at the University of Nottingham, exploring how waste from one industry could become valuable resources for another.</p>
    </section>

    <section class="section" id="mission">
      <h2>Mission</h2>
      <p>Our mission is to connect research, agriculture, and innovation to create sustainable cycles of growth.</p>

      <h2>Vision</h2>
      <p>Our vision is a student‑powered, science‑driven circular economy where local waste becomes local value — healthier soils, resilient crops, and communities learning by doing.</p>

      <h2>Values</h2>
      <ul>
        <li>Innovation through collaboration</li>
        <li>Science with community impact</li>
        <li>Transparency, inclusion, and education</li>
      </ul>
    </section>

    <section class="section" id="news-preview">
      <h2>Latest News</h2>
      <div id="latest-news-container">
        <!-- News will be loaded dynamically here -->
        <div class="no-news">
          <p class="lead">No news updates yet. Check back soon!</p>
        </div>
      </div>
    </section>

    <section class="section" id="newsletter">
      <h2>Stay Connected</h2>
      <p>Sign up for occasional updates from The BioGreen team.</p>
      <form id="email-form" action="https://script.google.com/macros/s/AKfycbx09ptrhwNos4jY00GO9pOzypgyk5Ovy_Yh0mus6G9JSiFmkeSFGYJ_e9o1cbjlWcKi/exec" method="POST">
        <input type="email" name="email" placeholder="Your email address" required>
        <button type="submit" class="btn">Subscribe</button>
      </form>
      <div id="form-message" style="display:none; margin-top:10px; padding:10px; border-radius:8px;"></div>
    </section>

    <section class="section" id="join">
      <div class="btn-center">
        <a class="btn" href="https://docs.google.com/forms/d/e/1FAIpQLSfyrYPMFbpblwrjf735tpshw0kfAPxARhTBlcg-CUtjKqo_Og/viewform" target="_blank">Join the Movement</a>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container cols">
      <div>
        <strong>The BioGreen</strong>
        <p class="lead">Built by students, for sustainability.</p>
      </div>
      <div>
        <p>Contact us: <a href="mailto:thebiogreenproject@gmail.com">thebiogreenproject@gmail.com</a></p>
        <p>
          <a href="https://www.instagram.com/thebiogreenproject_uon" target="_blank">Instagram</a> •
          <a href="https://github.com/thebiogreenproject" target="_blank">GitHub</a>
        </p>
        <small>© 2025 The BioGreen</small>
      </div>
    </div>
  </footer>

  <script>
    // Enhanced menu functionality with dropdown support
    document.addEventListener('DOMContentLoaded', function() {
      const toggle = document.querySelector('.menu-toggle');
      const menu = document.querySelector('.menu');
      const dropdowns = document.querySelectorAll('.dropdown');
      
      // Mobile menu toggle
      if (toggle && menu) {
        toggle.addEventListener('click', () => {
          menu.classList.toggle('open');
          toggle.textContent = menu.classList.contains('open') ? '✕' : '☰';
          toggle.setAttribute('aria-expanded', menu.classList.contains('open'));
        });
      }
      
      // Dropdown functionality
      dropdowns.forEach(dropdown => {
        const toggle = dropdown.querySelector('.dropdown-toggle');
        
        // Desktop: hover to open
        dropdown.addEventListener('mouseenter', () => {
          if (window.innerWidth > 860) {
            dropdown.classList.add('open');
          }
        });
        
        dropdown.addEventListener('mouseleave', () => {
          if (window.innerWidth > 860) {
            dropdown.classList.remove('open');
          }
        });
        
        // Mobile: click to toggle
        if (toggle) {
          toggle.addEventListener('click', (e) => {
            if (window.innerWidth <= 860) {
              e.preventDefault();
              dropdown.classList.toggle('open');
            }
          });
        }
      });
      
      // Load latest news
      loadLatestNews();
      
      // Handle email form submission
      const emailForm = document.getElementById('email-form');
      const formMessage = document.getElementById('form-message');
      
      if (emailForm) {
        emailForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const formData = new FormData(emailForm);
          
          // Show loading state
          const submitBtn = emailForm.querySelector('button[type="submit"]');
          const originalText = submitBtn.textContent;
          submitBtn.textContent = 'Subscribing...';
          submitBtn.disabled = true;
          
          fetch(emailForm.action, {
            method: 'POST',
            body: formData
          })
          .then(response => response.json())
          .then(data => {
            if (data.result === 'success') {
              formMessage.textContent = 'Thank you for subscribing!';
              formMessage.style.backgroundColor = '#e9f8ee';
              formMessage.style.color = '#0e7c3a';
              formMessage.style.display = 'block';
              emailForm.reset();
            } else {
              throw new Error(data.error);
            }
          })
          .catch(error => {
            formMessage.textContent = 'Sorry, there was an error. Please try again or email us directly.';
            formMessage.style.backgroundColor = '#fef2f2';
            formMessage.style.color = '#dc2626';
            formMessage.style.display = 'block';
            console.error('Error:', error);
          })
          .finally(() => {
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
          });
        });
      }
    });
    
    // Function to load latest news from news.html
    function loadLatestNews() {
      fetch('news.html')
        .then(response => response.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const newsCards = doc.querySelectorAll('#news-content .card');
          const container = document.getElementById('latest-news-container');
          
          if (newsCards.length > 0) {
            container.innerHTML = '';
            const cardGrid = document.createElement('div');
            cardGrid.className = 'card-grid';
            
            // Show only the latest 2 news items
            Array.from(newsCards).slice(0, 2).forEach(card => {
              cardGrid.appendChild(card.cloneNode(true));
            });
            
            // Add a link to view all news
            const viewAllLink = document.createElement('div');
            viewAllLink.style.textAlign = 'center';
            viewAllLink.style.marginTop = '20px';
            viewAllLink.innerHTML = '<a class="btn secondary" href="news.html">View All News</a>';
            
            container.appendChild(cardGrid);
            container.appendChild(viewAllLink);
          }
          // If no news, the default "no news" message remains
        })
        .catch(error => {
          console.error('Error loading news:', error);
        });
    }
  </script>
</body>
</html>
